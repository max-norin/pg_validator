Расширение позволяет производить проверку вставляемых данных и выдавать ответ об ошибках в виде json. Проверка уникальных индексов, уникального ограничения, внешних ключей. Тип данных не проверяется.

# Использование
Чтобы осуществить проверку нужно к таблице добавить триггер из расширения.

# Домены

Расширение приведённых список часто используемых доменов и проверок на эти домены в виде отдельных функций. Дополнительные типы данных для помощи в валидации данных

# FAQ

## Почему тип данных не проверяется?
Базовые типы данных такие как дата, время, дата и время, ip адрес - проверяются перед запуском триггеров и проверить их не удаётся. Конечно можно сделать на каждую таблицу функцию для вставки и обновления данных, а в саму таблицу запретить редактирования используя ... Однако это сильная морока для разработков и лишние энергозатраты со стороны сервера базы данных. Поэтому я рекомендую использовать домены

## Как и откуда берутся проверки?

Я считаю слово писать для каждого таблицы отдельных триггер с проверкой является морокой для разработчика поэтому при создании базы данных важно указать все нужные ограничения. Триггер расширение сможет извлечь из информационных таблиц данные ООО всех индексах и ограничениях и проверить правильность введённых данных. Если индексы или ограничения перекрывают друг друга или проверка не имеет смысла то проверка производится не будет. Я подробно испанский вы можете самостоятельно познакомиться с триггером.
Чтобы проверить работу можно воспользоваться файлами для тестов и поставить отображение сообщений об отладке или информации запросов.


# Что в файлах

## `init.sql `

- создается пользователь validation
  / [doc](https://www.postgresql.org/docs/current/sql-createrole.html)
- создается схема validation, принадлежащая вышеуказанному пользователю
  / [doc](https://www.postgresql.org/docs/current/sql-createschema.html)
- добавляется в search_path пользователя validation схема validation
  / [doc](https://www.postgresql.org/docs/current/ddl-schemas.html)

## `helpers.sql`

- создается функция для работы с правилами - если результат отрицательный, то возвращается сообщение
- создается оператор для краткой записи функции указанной выше

## `domains/*.sql`

Популярные домены:

- alpha
- numeric
- email
- url
- nickname

## `test/*.sql`

Тестовые файлы

# Полезное

- [Pseudotypes](https://www.postgresql.org/docs/current/datatype-pseudo.html)
- internal использовать можно только в функциях на C
- [Functions with Variable Numbers of Arguments](https://www.postgresql.org/docs/current/xfunc-sql.html#XFUNC-SQL-VARIADIC-FUNCTIONS)
- [Object Identifier Types](https://www.postgresql.org/docs/current/datatype-oid.html#DATATYPE-OID-TABLE)


